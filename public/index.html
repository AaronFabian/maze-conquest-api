<!doctype html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="shortcut icon" href="assets/game-icon.ico" type="image/x-icon"/><title>Maze Conquest</title><script defer="defer" src="index.4d79a2a496e0f6574728.js"></script><link href="main.58d028aee2d533afd9ba.css" rel="stylesheet"></head><body><div class="setting"><table><tr><td><label for="dPadX">d pad x</label></td><td><input id="dPadX" type="range" min="-1000" max="1000"/></td><td><input id="dPadXInp" type="number" min="-1000" max="1000" value="0"/></td></tr><tr><td><label for="dPadY">d pad y</label></td><td><input min="-1000" max="1000" value="0" id="dPadY" type="range"/></td><td><input id="dPadYInp" type="number" min="-1000" max="1000" value="0"/></td></tr><tr><td><label for="keyPadX">key pad x</label></td><td><input min="-1000" max="1000" value="0" id="keyPadX" type="range"/></td><td><input id="keyPadXInp" type="number" min="-1000" max="1000" value="0"/></td></tr><tr><td><label for="keyPadY">key pad y</label></td><td><input min="-1000" max="1000" value="0" id="keyPadY" type="range"/></td><td><input id="keyPadYInp" type="number" min="-1000" max="1000" value="0"/></td></tr><tr><td><label for="hideGUI">hide</label></td><td><input id="hideGUI" type="checkbox"/></td></tr><tr><td><label for="connectWithSp">connect sp controller</label></td><td><input id="connectWithSp" type="checkbox"/></td></tr><tr><td><button id="checkSocketBtn">Check Connection</button> <span id="roomNumber">-</span></td></tr><tr><td><button id="button">Connect</button></td><td><input id="inpSocketID"/></td><td><button id="buttonSend">Send message</button></td></tr></table><button class="toggle">â–¼</button></div><main><canvas id="canvas"></canvas><div class="sp-controller"><div class="d-pad"><button data-key="a">&larr;</button> <button data-key="w">&uarr;</button> <button data-key="d">&rarr;</button> <button data-key="s">&darr;</button></div><div class="key"><button data-key=" ">Space</button> <button data-key="Enter">Enter</button></div></div></main><script>const inpSocketID=document.getElementById("inpSocketID"),btn=document.getElementById("button");let chatWs;btn.addEventListener("click",(()=>{console.log(inpSocketID.value),chatWs=new WebSocket(`ws://localhost:8000/api/v1/ws/${inpSocketID.value}`),chatWs.onopen=function(e){console.log("[System] websocket ok")},chatWs.onclose=e=>{console.log("[System] websocket has closed")},chatWs.onmessage=e=>{const o=e.data.split("\n");for(const n of o){const o=JSON.parse(n);console.log(o);const c=o.key;switch(o.command){case"isDown":input.keyboard.isDown[c]=!0;break;case"pressed":input.keyboard.keysPressed[c]=!0;break;case"cancel":input.keyboard.isDown[c]=!1;break;case"idleStop":chatWs.close(1e3,"User close connection");break;case"checkForConnection":console.warn("Check connection ok!");break;default:throw console.error(e),new Error("Unexpected command input")}}},chatWs.onerror=function(e){console.error("[System Error] ",e)};document.getElementById("buttonSend").addEventListener("click",(()=>{chatWs.send(JSON.stringify({command:"checkForConnection"}))}))}))</script></body></html>